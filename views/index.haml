!!! 5
%html
  %head
    %link{rel: 'stylesheet', href: '/components/uikit/dist/css/uikit.min.css'}
    %link{rel: 'stylesheet', href: '/components/sweetalert2/dist/sweetalert2.min.css'}
    %script{src: '/components/jquery/dist/jquery.min.js'}
    %script{src: '/components/uikit/dist/js/uikit.min.js'}
    %script{src: '/components/sweetalert2/dist/sweetalert2.min.js'}
  %body 
    /%button.uk-button.uk-button-default.uk-button-large Get Chat
    /%button.uk-button.uk-button-primary.uk-button-large List Players
    %button.uk-button.uk-button-danger.uk-button-large{onclick: 'run_reboot_and_update();'} Update/Restart
:javascript
  function run_reboot_and_update() {
    swal({
      title: 'Are you sure?',
      text: "You won't be able to revert this! And if there are people on the server it WILL kick them off!!!!",
      type: 'warning',
      showCancelButton: true,
      confirmButtonColor: '#3085d6',
      cancelButtonColor: '#d33',
      confirmButtonText: 'Yes, Reboot/Update it!',
      cancelButtonText: 'No, cancel!',
      confirmButtonClass: 'btn btn-success',
      cancelButtonClass: 'btn btn-danger',
      buttonsStyling: false
    }).then(function () {
      $.ajax({
          url:'/api/run-command',
          type:'post',
          dataType: 'json',
          data: {"cmd": "run_upgrades_and_reboot"},
          success:function(){
              swal('', 'Instruction Sent! Server Should be Restarted/Updated shortly', 'success');
          },
          error:function(jqxhr){
              swal('Uhh Ohh!', 'Your instruction was not sent!\n' + jqxhr.responseText, 'error');
          }
      });
    }, function (dismiss) {
      if (dismiss === 'cancel') {
        swal(
          'Cancelled',
          'A wise decision young padawan :)',
          'error'
        )
      }
    });
  }
